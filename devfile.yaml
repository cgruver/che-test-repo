schemaVersion: 2.2.0
metadata:
  name: localstack
  projectType: LocalStack
  displayName: LocalStack
components:
  - name: aws-localstack
    container: 
      image: public.ecr.aws/localstack/localstack
  - name: localstack-deployment
    openshift:
      deployByDefault: true
      inlined: |
        kind: Deployment
        apiVersion: apps/v1
        metadata:
          name: localstack-app
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: localstack-app
          template:
            metadata:
              labels:
                app: localstack-app
            spec:
              containers:
                - name: localstack
                  image: public.ecr.aws/localstack/localstack
                  ports:
                    - name: http
                      containerPort: 4566
                      protocol: TCP
  - name: localstack-service
    openshift:
      deployByDefault: true
      inlined: |
        kind: Service
        apiVersion: v1
        metadata:
          name: localstack-app
        spec:
        ports:
          - name: http-4566
            port: 4566
            protocol: TCP
            targetPort: 4566
        selector:
          app: localstack-app
